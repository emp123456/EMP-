
export class TunnelScroll { constructor() { this.c = document.getElementById('tunnel-container'); if (!this.c) return; this.s = document.querySelectorAll('.tunnel-section'); this.zD = document.getElementById('z-val'); this.z = 0; this.tZ = 0; this.mZ = 13000; this.lZ = 0; this.i() } i() { window.addEventListener('wheel', e => { this.tZ += e.deltaY * 4.0; if (this.tZ < 0) this.tZ = 0; if (this.tZ > this.mZ) this.tZ = this.mZ }, { passive: true }); this.a() } a() { const d = this.tZ - this.z; this.z += d * 0.05; if (Math.abs(this.z - this.lZ) > 1000) { this.tr(); this.lZ = this.z } if (this.z > 7000 && this.z < 9000) document.body.classList.add('invert-mode'); else document.body.classList.remove('invert-mode'); if (this.zD) this.zD.innerText = Math.round(this.z).toString().padStart(5, '0'); this.c.style.transform = `translate(-50%, -50%) translate3d(0, 0, ${this.z}px)`; this.s.forEach(sec => { const sZ = parseFloat(sec.style.getPropertyValue('--z')); const vZ = sZ + this.z; let o = 0; if (vZ < -1000) o = 0; else if (vZ < 0) o = mR(vZ, -1000, 0, 0, 1); else if (vZ < 500) o = 1; else o = mR(vZ, 500, 1000, 1, 0); sec.style.opacity = o; if (o > 0.1) { const j = this.z > 8000 ? 5 : 1; if (Math.random() > 0.90) { const rx = (Math.random() - 0.5) * j; const ry = (Math.random() - 0.5) * j; sec.style.transform = `translate(-50%, -50%) translate3d(${rx}px, ${ry}px, ${sZ}px)` } else { sec.style.transform = `translate(-50%, -50%) translate3d(0, 0, ${sZ}px)` } } }); requestAnimationFrame(this.a.bind(this)) } tr() { const r = Math.random(); if (r < 0.3) window.effectGlitch(); else if (r < 0.6) window.effectNova() } } function mR(v, l1, h1, l2, h2) { return l2 + (h2 - l2) * (v - l1) / (h1 - l1) } export class Vortex { constructor() { this.c = document.getElementById('vortex-canvas'); if (!this.c) return; this.x = this.c.getContext('2d'); this.rs(); this.p = []; this.nP = 400; this.ce = { x: this.w / 2, y: this.h / 2 }; this.iN = false; this.iP(); this.a(); window.addEventListener('resize', this.rs.bind(this)) } rs() { this.w = window.innerWidth; this.h = window.innerHeight; this.c.width = this.w; this.c.height = this.h; this.ce = { x: this.w / 2, y: this.h / 2 } } iP() { for (let i = 0; i < this.nP; i++)this.p.push(new P(this.w, this.h)) } triggerNova() { this.iN = true; setTimeout(() => { this.iN = false }, 800) } a() { this.x.fillStyle = 'rgba(0, 0, 0, 0.1)'; this.x.fillRect(0, 0, this.w, this.h); this.p.forEach(p => { p.u(this.ce, this.iN); p.d(this.x) }); requestAnimationFrame(this.a.bind(this)) } } class P { constructor(w, h) { this.r(w, h) } r(w, h) { this.x = Math.random() * w; this.y = Math.random() * h; this.pX = this.x; this.pY = this.y; this.vx = (Math.random() - 0.5) * 2; this.vy = (Math.random() - 0.5) * 2; this.l = Math.random() * 100 + 50; this.c = Math.random() > 0.5 ? '#0ff' : '#555' } u(c, iN) { this.pX = this.x; this.pY = this.y; const dx = c.x - this.x; const dy = c.y - this.y; const d = Math.sqrt(dx * dx + dy * dy); const a = Math.atan2(dy, dx); if (iN) { this.vx -= Math.cos(a) * 30; this.vy -= Math.sin(a) * 30 } else { this.vx += Math.cos(a) * 0.2; this.vy += Math.sin(a) * 0.2; this.vx -= Math.sin(a) * 0.5; this.vy += Math.cos(a) * 0.5 } this.vx *= 0.96; this.vy *= 0.96; this.x += this.vx; this.y += this.vy; this.l--; if (d < 20 || this.l < 0 || Math.abs(this.x - c.x) > window.innerWidth) this.r(window.innerWidth, window.innerHeight) } d(c) { c.strokeStyle = this.c; c.lineWidth = 1; c.beginPath(); c.moveTo(this.pX, this.pY); c.lineTo(this.x, this.y); c.stroke() } } import { AudioManager } from './audio.js'; let vI; let aI; let aS = false; document.addEventListener('DOMContentLoaded', () => { new TunnelScroll(); vI = new Vortex(); aI = new AudioManager(); const cB = document.getElementById('collapseBtn'); if (cB) { cB.addEventListener('click', tC) } const sA = () => { if (!aS && aI) { aI.start('main'); aS = true; aS = true; window.removeEventListener('click', sA); window.removeEventListener('wheel', sA) } }; window.addEventListener('click', sA); window.addEventListener('wheel', sA) }); window.effectGlitch = () => { document.body.classList.add('shake-mode'); document.body.style.filter = 'hue-rotate(90deg) contrast(200%)'; setTimeout(() => { document.body.classList.remove('shake-mode'); document.body.style.filter = '' }, 500) }; window.effectNova = () => { if (vI) vI.triggerNova() }; function tC() { if (aI) aI.stop(); document.body.style.transformOrigin = "center center"; document.body.style.transform = "scale(0) rotate(720deg)"; document.body.style.filter = "invert(1) contrast(500%)"; document.body.style.transition = "all 2.5s cubic-bezier(0.8, 0, 0.2, 1)"; setTimeout(() => { window.location.href = 'contact.html' }, 2500) };
